import{a as k,b as u,c as y,d as I,f as E,g as w,h as L,i as F,j as O,k as T,l as N,m as q,n as B,o as D,p as G,q as R,r as j,s as z,t as A,u as V,v as W,w as Y,x as H,y as J,z as K}from"./chunk-P34KFRS2.js";import{h as P,x as Q}from"./chunk-NURJLKLX.js";import{g as C,i as S}from"./chunk-TGXVOOF4.js";import{Bb as i,Cb as h,Db as x,Fb as M,Na as a,Oa as p,ab as d,ba as _,db as l,ib as t,jb as e,kb as c,qb as g,rb as b}from"./chunk-QGQ54SUM.js";function X(r,n){r&1&&(t(0,"mat-error"),i(1,"Email is required"),e())}function Z(r,n){r&1&&(t(0,"mat-error"),i(1,"Enter a valid email"),e())}function $(r,n){r&1&&(t(0,"mat-error"),i(1,"Password is required"),e())}function ee(r,n){if(r&1&&(t(0,"div",17)(1,"mat-icon"),i(2,"error"),e(),i(3),e()),r&2){let m=b();a(3),x(" ",m.errorMessage," ")}}function te(r,n){r&1&&c(0,"mat-spinner",18)}function ie(r,n){r&1&&(t(0,"span")(1,"mat-icon"),i(2,"login"),e(),i(3," Sign In"),e())}var U=class r{constructor(n,m,o){this.fb=n;this.authService=m;this.router=o}loginForm;hidePassword=!0;isLoading=!1;errorMessage="";ngOnInit(){if(this.authService.isLoggedIn()){this.router.navigate(["/dashboard"]);return}this.loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required]]})}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:n=>{this.isLoading=!1,console.log("Login successful:",n),this.router.navigate(["/dashboard"])},error:n=>{this.isLoading=!1,console.error("Login error:",n),this.errorMessage=n.error?.error||"Login failed. Please try again."}}))}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(m){return new(m||r)(p(F),p(Q),p(P))};static \u0275cmp=_({type:r,selectors:[["app-login"]],standalone:!0,features:[M],decls:35,vars:10,consts:[[1,"login-container"],[1,"login-card","animate-fade-up"],[1,"login-header"],[1,"title-text"],[1,"subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","Enter your email"],["matPrefix",""],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["class","error-message animate-slide-up",4,"ngIf"],["mat-raised-button","","type","submit",1,"login-button",3,"disabled"],["diameter","20",4,"ngIf"],[1,"login-footer"],[1,"link",3,"click"],[1,"error-message","animate-slide-up"],["diameter","20"]],template:function(m,o){if(m&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"Task Manager"),e(),t(5,"p",4),i(6,"Welcome back! Please sign in to your account."),e()(),t(7,"form",5),g("ngSubmit",function(){return o.onSubmit()}),t(8,"mat-form-field",6)(9,"mat-label"),i(10,"Email"),e(),c(11,"input",7),t(12,"mat-icon",8),i(13,"email"),e(),d(14,X,2,0,"mat-error",9)(15,Z,2,0,"mat-error",9),e(),t(16,"mat-form-field",6)(17,"mat-label"),i(18,"Password"),e(),c(19,"input",10),t(20,"mat-icon",8),i(21,"lock"),e(),t(22,"button",11),g("click",function(){return o.hidePassword=!o.hidePassword}),t(23,"mat-icon"),i(24),e()(),d(25,$,2,0,"mat-error",9),e(),d(26,ee,4,1,"div",12),t(27,"button",13),d(28,te,1,0,"mat-spinner",14)(29,ie,4,0,"span",9),e(),t(30,"div",15)(31,"p"),i(32,"Don't have an account? "),t(33,"a",16),g("click",function(){return o.goToRegister()}),i(34,"Sign up here"),e()()()()()()),m&2){let s,f,v;a(7),l("formGroup",o.loginForm),a(7),l("ngIf",(s=o.loginForm.get("email"))==null?null:s.hasError("required")),a(),l("ngIf",(f=o.loginForm.get("email"))==null?null:f.hasError("email")),a(4),l("type",o.hidePassword?"text":"password"),a(5),h(o.hidePassword?"visibility_off":"visibility"),a(),l("ngIf",(v=o.loginForm.get("password"))==null?null:v.hasError("required")),a(),l("ngIf",o.errorMessage),a(),l("disabled",o.loginForm.invalid||o.isLoading),a(),l("ngIf",o.isLoading),a(),l("ngIf",!o.isLoading)}},dependencies:[S,C,O,E,k,y,I,w,L,T,R,G,N,q,B,D,z,j,W,A,V,H,Y,K,J],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px;background:linear-gradient(135deg,var(--color-dark),var(--color-soft));font-family:Poppins,sans-serif}.login-card[_ngcontent-%COMP%]{width:100%;max-width:420px;padding:40px;background:#fff;border-radius:20px;box-shadow:0 10px 25px #b3379133;text-align:left}.title-text[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;background:linear-gradient(45deg,var(--color-dark),var(--color-mid));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-mid-dark)}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}  .mat-mdc-form-field-outline{border-radius:12px}  .mat-mdc-form-field-label{color:var(--color-mid)!important}  input{color:var(--color-dark)}  .mat-icon{color:var(--color-mid)}mat-error[_ngcontent-%COMP%]{font-size:.9rem;color:#e63972}.error-message[_ngcontent-%COMP%]{background:#e639721a;color:#e63972;padding:12px;border-radius:10px;margin-bottom:20px;display:flex;align-items:center;gap:8px}.login-button[_ngcontent-%COMP%]{width:100%;height:50px;border-radius:25px;font-size:1.1rem;margin:20px 0;color:#fff!important;background:linear-gradient(45deg,var(--color-dark),var(--color-mid-dark))!important;transition:all .3s ease}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 20px #b337914d}.login-button[_ngcontent-%COMP%]:disabled{background:var(--color-light);color:#fff;opacity:.6}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color-mid-dark)}.login-footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:var(--color-dark);font-weight:500;text-decoration:underline;cursor:pointer;transition:color .3s ease}.login-footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{color:var(--color-mid)}"]})};export{U as LoginComponent};
